(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(79)},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(10),c=a.n(i),o=a(4),r=a(5),s=a(9),u=a(6),d=a(8),p=a(1),h=a(12),m=a(7),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).infoWindowRef=l.a.createRef(),a.onInfoWindowOpen=a.onInfoWindowOpen.bind(Object(p.a)(Object(p.a)(a))),a.containerElement||(a.containerElement=document.createElement("div")),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"onInfoWindowOpen",value:function(){c.a.render(l.a.Children.only(this.props.children),this.containerElement),this.infoWindowRef.current.infowindow.setContent(this.containerElement)}},{key:"render",value:function(){return l.a.createElement(h.InfoWindow,Object.assign({onOpen:this.onInfoWindowOpen,ref:this.infoWindowRef},this.props))}}]),t}(n.Component),b=function(){return""},f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggleInfoWindow=function(e,t,n){t.title===a.state.activeMarker.title&&a.state.showingInfoWindow?a.setState({activeMarker:{},showingInfoWindow:!1}):a.setState({selectedPlace:e.place_,activeMarker:t,showingInfoWindow:!0})},a.state={activeMarker:{},selectedPlace:{},apiKey:"",markers:[]},a.toggleInfoWindow=a.toggleInfoWindow.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"map"},l.a.createElement(h.Map,{google:this.props.google,zoom:5,initialCenter:{lat:60.192059,lng:24.945831}},this.props.places.map(function(t){return l.a.createElement(h.Marker,{key:t.id,position:{lat:t.latitude,lng:t.longitude},title:t.title,place_:t,onClick:e.toggleInfoWindow})}),l.a.createElement(g,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},l.a.createElement("div",{className:"infoWindow"},l.a.createElement("h3",null,this.state.selectedPlace.title),l.a.createElement("p",null,this.state.selectedPlace.description),l.a.createElement("p",null,"Open: ",this.state.selectedPlace.openingHours)))))}}]),t}(n.Component),E=Object(m.b)(function(e){return{places:e.places}})(f),P=Object(h.GoogleApiWrapper)({apiKey:b()})(E),v=a(11),O=a(24),j=a.n(O),y=a(32),C=a(13),L=a.n(C),w="/api/places/",F={getPlaces:function(){return L.a.get(w).then(function(e){return e.data})},getPlace:function(e){return L.a.get(w+e).then(function(e){return e.data})},createPlace:function(e){return L.a.post(w,e).then(function(e){return e.data})},deletePlace:function(e){return L.a.delete(w+e).then(function(e){return e.data})},updatePlace:function(e){return L.a.put(w+e.id,e).then(function(e){return e.data})}};var N=function(e){var t={title:e.title,description:e.description,latitude:e.latitude,longitude:e.longitude,openingHours:e.openingHours};return function(e){F.createPlace(t).catch(function(e){console.log(e)}).then(function(t){e(H(t))})}},k=function(e){return function(t){F.updatePlace(e).catch(function(e){console.log(e)}).then(function(a){t(B(e))})}},S=function(){return{type:"FETCH_PLACES_BEGIN"}},I=function(e){return{type:"FETCH_PLACES_SUCCESS",data:{places:e}}},D=function(e){return{type:"FETCH_PLACES_FAILURE",data:{error:e}}},H=function(e){return{type:"CREATE_PLACE",data:{title:e.title,description:e.description,latitude:e.latitude,longitude:e.longitude,openingHours:e.openingHours,id:e.id}}},U=function(e){return{type:"DELETE_PLACE",data:{id:e}}},B=function(e){return{type:"UPDATE_PLACE",data:{place:e}}};var T=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={title:"",description:"",latitude:"",longitude:"",openingHours:""},e.handleChange=e.handleChange.bind(Object(p.a)(Object(p.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(p.a)(Object(p.a)(e))),e.toggleFormDisplay=e.toggleFormDisplay.bind(Object(p.a)(Object(p.a)(e))),e.hideForm=e.hideForm.bind(Object(p.a)(Object(p.a)(e))),e}return Object(d.a)(t,e),Object(r.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(v.a)({},e.target.id,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.title,a=this.state.description,n=this.state.latitude,l=this.state.longitude,i=this.state.openingHours;this.props.createPlace({title:t,description:a,latitude:n,longitude:l,openingHours:i}),this.setState({title:"",description:"",latitude:"",longitude:"",openingHours:""}),this.hideForm()}},{key:"toggleFormDisplay",value:function(e){e.preventDefault();var t=document.getElementById("createPlaceForm");"none"===t.style.display?e.target.classList.add("goldenButton"):e.target.classList.remove("goldenButton"),"none"===t.style.display?t.style.display="block":t.style.display="none",document.getElementById("title").focus()}},{key:"hideForm",value:function(){document.getElementById("createPlaceForm").style.display="none",document.getElementById("addPlaceButton").classList.remove("goldenButton")}},{key:"render",value:function(){return l.a.createElement("div",{className:"placeForm"},l.a.createElement("button",{onClick:this.toggleFormDisplay,className:"addPlaceButton",id:"addPlaceButton"},"Add place"),l.a.createElement("div",{className:"createPlaceForm",id:"createPlaceForm",style:{display:"none"}},l.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off"},l.a.createElement("div",{className:"createPlaceFormRow"},l.a.createElement("label",{htmlFor:"title",className:"createPlaceLabel"},"Title"),l.a.createElement("input",{type:"text",className:"createPlaceInput",id:"title",value:this.state.title,onChange:this.handleChange})),l.a.createElement("div",{className:"createPlaceFormRow"},l.a.createElement("label",{htmlFor:"description",className:"createPlaceLabel"},"Description"),l.a.createElement("input",{type:"text",className:"createPlaceInput",id:"description",value:this.state.description,onChange:this.handleChange})),l.a.createElement("div",{className:"createPlaceFormRow"},l.a.createElement("label",{htmlFor:"latitude",className:"createPlaceLabel"},"Latitude"),l.a.createElement("input",{type:"text",className:"createPlaceInput",id:"latitude",value:this.state.latitude,onChange:this.handleChange})),l.a.createElement("div",{className:"createPlaceFormRow"},l.a.createElement("label",{htmlFor:"longitude",className:"createPlaceLabel"},"Longitude"),l.a.createElement("input",{type:"text",className:"createPlaceInput",id:"longitude",value:this.state.longitude,onChange:this.handleChange})),l.a.createElement("div",{className:"createPlaceFormRow"},l.a.createElement("label",{htmlFor:"openingHours",className:"createPlaceLabel"},"Opening hours"),l.a.createElement("input",{type:"text",className:"createPlaceInput",id:"openingHours",value:this.state.openingHours,onChange:this.handleChange})),l.a.createElement("button",{type:"submit",className:"createPlaceSaveButton"},"Save"))))}}]),t}(n.Component),A=Object(m.b)(null,function(e){return{createPlace:function(t){return e(N(t))}}})(T);var _=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={updateTitle:"",updateDescription:"",updateLatitude:"",updateLongitude:"",updateOpeningHours:"",id:""},a.handleChange=a.handleChange.bind(Object(p.a)(Object(p.a)(a))),a.handleUpdate=a.handleUpdate.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({updateTitle:this.props.place.title,updateDescription:this.props.place.description,updateLatitude:this.props.place.latitude,updateLongitude:this.props.place.longitude,updateOpeningHours:this.props.place.openingHours,id:this.props.place.id})}},{key:"handleChange",value:function(e){this.setState(Object(v.a)({},e.target.id,e.target.value))}},{key:"handleUpdate",value:function(e){e.preventDefault(),this.props.updatePlace({title:this.state.updateTitle,description:this.state.updateDescription,latitude:this.state.updateLatitude,longitude:this.state.updateLongitude,openingHours:this.state.updateOpeningHours,id:this.state.id}),this.setState({updateTitle:"",updateDescription:"",updateLatitude:"",updateLongitude:"",updateOpeningHours:""}),this.props.hideUpdatePlace()}},{key:"render",value:function(){return l.a.createElement("div",{className:"updatePlaceForm",id:"updatePlaceForm"},l.a.createElement("form",{onSubmit:this.handleUpdate,autoComplete:"off"},l.a.createElement("div",{className:"updatePlaceFormRow"},l.a.createElement("label",{htmlFor:"updateTitle",className:"updatePlaceLabel"},"Title"),l.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateTitle",value:this.state.updateTitle,onChange:this.handleChange,autoFocus:!0})),l.a.createElement("div",{className:"updatePlaceFormRow"},l.a.createElement("label",{htmlFor:"updateDescription",className:"updatePlaceLabel"},"Description"),l.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateDescription",value:this.state.updateDescription,onChange:this.handleChange})),l.a.createElement("div",{className:"updatePlaceFormRow"},l.a.createElement("label",{htmlFor:"updateLatitude",className:"updatePlaceLabel"},"Latitude"),l.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateLatitude",value:this.state.updateLatitude,onChange:this.handleChange})),l.a.createElement("div",{className:"updatePlaceFormRow"},l.a.createElement("label",{htmlFor:"updateLongitude",className:"updatePlaceLabel"},"Longitude"),l.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateLongitude",value:this.state.updateLongitude,onChange:this.handleChange})),l.a.createElement("div",{className:"updatePlaceFormRow"},l.a.createElement("label",{htmlFor:"updateOpeningHours",className:"updatePlaceLabel"},"Opening hours"),l.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateOpeningHours",value:this.state.updateOpeningHours,onChange:this.handleChange})),l.a.createElement("button",{type:"submit",className:"updatePlaceSaveButton"},"Save")))}}]),t}(n.Component),R=Object(m.b)(null,function(e){return{updatePlace:function(t){return e(k(t))}}})(_),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).toggleUpdatePlace=function(e){e.preventDefault(),a.state.showUpdateForm?e.target.classList.remove("goldenButton"):e.target.classList.add("goldenButton"),a.setState({showUpdateForm:!a.state.showUpdateForm})},a.state={showPlace:!1,showUpdateForm:!1},a.handleDeletePlace=a.handleDeletePlace.bind(Object(p.a)(Object(p.a)(a))),a.toggleShowPlace=a.toggleShowPlace.bind(Object(p.a)(Object(p.a)(a))),a.toggleUpdatePlace=a.toggleUpdatePlace.bind(Object(p.a)(Object(p.a)(a))),a.hideUpdatePlace=a.hideUpdatePlace.bind(Object(p.a)(Object(p.a)(a))),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({place:this.props.place})}},{key:"handleDeletePlace",value:function(){this.props.deletePlace(this.props.place.id)}},{key:"toggleShowPlace",value:function(){var e=document.getElementById("placeListTitle"+this.props.place.id),t=document.getElementById("placeListObject"+this.props.place.id);this.state.showPlace?(e.style.color="orange",t.classList.remove("linearGradient")):(e.style.color="gold",t.classList.add("linearGradient")),this.setState({showPlace:!this.state.showPlace})}},{key:"hideUpdatePlace",value:function(){this.setState({showUpdateForm:!1}),document.getElementById("updatePlaceButton").classList.remove("goldenButton")}},{key:"render",value:function(){var e="placeListObject"+this.props.place.id,t="placeListTitle"+this.props.place.id;return l.a.createElement("div",{key:this.props.place.id,className:"placeListObject",id:e},l.a.createElement("span",{onClick:this.toggleShowPlace,className:"placeListTitle",id:t},this.props.place.title),this.state.showPlace?l.a.createElement("div",null,l.a.createElement("span",null,this.props.place.description),l.a.createElement("br",null),l.a.createElement("span",null,"Open: ",this.props.place.openingHours),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.handleDeletePlace,className:"deletePlaceButton"},"Delete"),l.a.createElement("button",{onClick:this.toggleUpdatePlace,className:"updatePlaceButton",id:"updatePlaceButton"},"Update"),this.state.showUpdateForm?l.a.createElement(R,{place:this.props.place,hideUpdatePlace:this.hideUpdatePlace}):null):null)}}]),t}(n.Component),x=Object(m.b)(null,function(e){return{deletePlace:function(t){return e(function(e){return function(t){F.deletePlace(e).catch(function(e){console.log(e)}).then(function(a){t(U(e))})}}(t))}}})(W),M=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(){var e=Object(y.a)(j.a.mark(function e(t){var a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(S()),e.prev=1,e.next=4,F.getPlaces();case 4:return a=e.sent,t(I(a)),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",t(D(e.t0)));case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props,t=e.error,a=e.loading,n=e.places;return t?l.a.createElement("div",null,"Error! ",t.message):a&&n.length>0?l.a.createElement("div",null,"Loading..."):l.a.createElement("div",{className:"placesList"},n.map(function(e){return l.a.createElement(x,{key:e.id,place:e})}))}}]),t}(l.a.Component),G=Object(m.b)(function(e){return{places:e.places,loading:e.loading,error:e.error}})(M),J=function(){return l.a.createElement("div",{className:"content"},l.a.createElement(P,null),l.a.createElement(A,null),l.a.createElement(G,null))},K=a(15),z=a(33),q=a(17),Q={places:[],loading:!1,error:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PLACES_BEGIN":return Object(q.a)({},e,{loading:!0,error:null});case"FETCH_PLACES_SUCCESS":return Object(q.a)({},e,{loading:!1,places:t.data.places});case"FETCH_PLACES_FAILURE":return Object(q.a)({},e,{loading:!1,error:t.data.error,places:[]});case"CREATE_PLACE":return Object.assign({},e,{places:e.places.concat(t.data)});case"DELETE_PLACE":return Object.assign({},e,{places:e.places.filter(function(e){return e.id!==t.data.id})});case"UPDATE_PLACE":return Object.assign({},e,{places:e.places.map(function(e){return e.id!==t.data.place.id?e:t.data.place})});default:return e}},X=Object(K.c)(V,Object(K.a)(z.a));a(76),a(77),a(78);Object(i.render)(l.a.createElement(m.a,{store:X},l.a.createElement(J,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.3b16c1ab.chunk.js.map