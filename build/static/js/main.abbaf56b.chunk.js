(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){e.exports=a(79)},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),l=a.n(o),i=a(2),s=a(3),u=a(5),d=a(4),c=a(6),p=a(8),h=a.n(p),y=function(){return h.a.get("/api/maps/api_key").then(function(e){return e.data})},m=a(1),g=a(15),O=a(7),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).infoWindowRef=r.a.createRef(),a.onInfoWindowOpen=a.onInfoWindowOpen.bind(Object(m.a)(Object(m.a)(a))),a.containerElement||(a.containerElement=document.createElement("div")),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"onInfoWindowOpen",value:function(){l.a.render(r.a.Children.only(this.props.children),this.containerElement),this.infoWindowRef.current.infowindow.setContent(this.containerElement)}},{key:"render",value:function(){return r.a.createElement(g.InfoWindow,Object.assign({onOpen:this.onInfoWindowOpen,ref:this.infoWindowRef},this.props))}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).toggleInfoWindow=function(e,t,n){t.title===a.state.activeMarker.title&&a.state.showingInfoWindow?a.setState({activeMarker:{},showingInfoWindow:!1}):a.setState({selectedPlace:e.place_,activeMarker:t,showingInfoWindow:!0})},a.state={activeMarker:{},selectedPlace:{}},a.toggleInfoWindow=a.toggleInfoWindow.bind(Object(m.a)(Object(m.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"map"},r.a.createElement(g.Map,{google:this.props.google,zoom:5,initialCenter:{lat:60.192059,lng:24.945831}},this.props.placesByQuery.length>0||this.props.keywordSearchQuery.length?this.props.placesByQuery.map(function(t){return r.a.createElement(g.Marker,{key:t.id,position:{lat:t.latitude,lng:t.longitude},title:t.title,place_:t,onClick:e.toggleInfoWindow})}):this.props.places.map(function(t){return r.a.createElement(g.Marker,{key:t.id,position:{lat:t.latitude,lng:t.longitude},title:t.title,place_:t,onClick:e.toggleInfoWindow})}),r.a.createElement(b,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow},r.a.createElement("div",{className:"infoWindow"},r.a.createElement("h3",null,this.state.selectedPlace.title),r.a.createElement("p",null,this.state.selectedPlace.description),r.a.createElement("p",null,"Open: ",this.state.selectedPlace.openingHours)))))}}]),t}(n.Component),f=Object(O.b)(function(e){return{places:e.placeReducer.places,placesByQuery:e.placeReducer.placesByQuery,keywordSearchQuery:e.placeReducer.keywordSearchQuery,markers:e.markerReducer.markers}})(v),w=Object(g.GoogleApiWrapper)(function(e){return{apiKey:e.apiKey}})(f),E=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={activeMarker:{},selectedPlace:{},apiKey:""},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;y().then(function(t){e.setState({apiKey:t})})}},{key:"render",value:function(){return this.state.apiKey?r.a.createElement(w,{apiKey:this.state.apiKey}):null}}]),t}(n.Component),k=a(11),j=a(17),L=a.n(j),M=a(19),I={getPlaces:function(){return h.a.get("/api/places/").then(function(e){return e.data})},getPlace:function(e){return h.a.get("/api/places/"+e).then(function(e){return e.data})},createPlace:function(e){return h.a.post("/api/places/",e).then(function(e){return e.data})},deletePlace:function(e){return h.a.delete("/api/places/"+e).then(function(e){return e.data})},updatePlace:function(e){return h.a.put("/api/places/"+e.id,e).then(function(e){return e.data})}};function C(){return function(){var e=Object(M.a)(L.a.mark(function e(t){var a;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(F()),e.prev=1,e.next=4,I.getPlaces();case 4:return a=e.sent,t(B(a)),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",t(D(e.t0)));case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()}var P=function(e){var t={title:e.title,description:e.description,latitude:e.latitude,longitude:e.longitude,openingHours:e.openingHours};return function(e){I.createPlace(t).catch(function(e){console.log(e)}).then(function(t){e(S(t))})}},K=function(e){return function(t){I.updatePlace(e).catch(function(e){console.log(e)}).then(function(a){t(T(e))})}},F=function(){return{type:"FETCH_PLACES_BEGIN"}},B=function(e){return{type:"FETCH_PLACES_SUCCESS",data:{places:e}}},D=function(e){return{type:"FETCH_PLACES_FAILURE",data:{error:e}}},S=function(e){return{type:"CREATE_PLACE",data:{id:e.id,title:e.title,description:e.description,latitude:e.latitude,longitude:e.longitude,openingHours:e.openingHours}}},N=function(e){return{type:"DELETE_PLACE",data:{id:e}}},T=function(e){return{type:"UPDATE_PLACE",data:{place:e}}};function R(e,t){for(var a=document.getElementsByTagName("LABEL"),n=0;n<a.length;n++)if(a[n].htmlFor===e){var r=document.getElementById(a[n].htmlFor);r&&(r.label=a[n]),r.label.style.color=t;break}}function _(e,t){document.getElementById(e).style.backgroundColor=t}var U=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).state={title:"",description:"",latitude:"",longitude:"",openingHours:""},e.handleChange=e.handleChange.bind(Object(m.a)(Object(m.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(m.a)(Object(m.a)(e))),e.toggleFormDisplay=e.toggleFormDisplay.bind(Object(m.a)(Object(m.a)(e))),e.hideForm=e.hideForm.bind(Object(m.a)(Object(m.a)(e))),e.handleMouseOverLabel=e.handleMouseOverLabel.bind(Object(m.a)(Object(m.a)(e))),e.handleMouseOutLabel=e.handleMouseOutLabel.bind(Object(m.a)(Object(m.a)(e))),e.handleMouseOverInput=e.handleMouseOverInput.bind(Object(m.a)(Object(m.a)(e))),e.handleMouseOutInput=e.handleMouseOutInput.bind(Object(m.a)(Object(m.a)(e))),e}return Object(c.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.id,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.title,a=this.state.description,n=this.state.latitude,r=this.state.longitude,o=this.state.openingHours;this.props.createPlace({title:t,description:a,latitude:n,longitude:r,openingHours:o}),this.setState({title:"",description:"",latitude:"",longitude:"",openingHours:""}),this.hideForm()}},{key:"toggleFormDisplay",value:function(e){e.preventDefault();var t=document.getElementById("createPlaceForm");"none"===t.style.display?e.target.classList.add("goldenButton"):e.target.classList.remove("goldenButton"),"none"===t.style.display?t.style.display="block":t.style.display="none",document.getElementById("title").focus()}},{key:"hideForm",value:function(){document.getElementById("createPlaceForm").style.display="none",document.getElementById("addPlaceButton").classList.remove("goldenButton")}},{key:"handleMouseOverInput",value:function(e){e.preventDefault(),R(e.target.id,"gold"),_(e.target.id,"gold")}},{key:"handleMouseOutInput",value:function(e){e.preventDefault(),R(e.target.id,"orange"),_(e.target.id,"orange")}},{key:"handleMouseOverLabel",value:function(e){e.preventDefault(),R(e.target.htmlFor,"gold"),_(e.target.htmlFor,"gold")}},{key:"handleMouseOutLabel",value:function(e){e.preventDefault(),R(e.target.htmlFor,"orange"),_(e.target.htmlFor,"orange")}},{key:"render",value:function(){return r.a.createElement("div",{className:"placeForm"},r.a.createElement("button",{onClick:this.toggleFormDisplay,className:"addPlaceButton",id:"addPlaceButton"},"Add place"),r.a.createElement("div",{className:"createPlaceForm",id:"createPlaceForm",style:{display:"none"}},r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off"},r.a.createElement("div",{className:"createPlaceFormRow"},r.a.createElement("label",{htmlFor:"title",className:"createPlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Title"),r.a.createElement("input",{type:"text",className:"createPlaceInput",id:"title",value:this.state.title,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("div",{className:"createPlaceFormRow"},r.a.createElement("label",{htmlFor:"description",className:"createPlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Description"),r.a.createElement("input",{type:"text",className:"createPlaceInput",id:"description",value:this.state.description,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("div",{className:"createPlaceFormRow"},r.a.createElement("label",{htmlFor:"latitude",className:"createPlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Latitude"),r.a.createElement("input",{type:"text",className:"createPlaceInput",id:"latitude",value:this.state.latitude,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("div",{className:"createPlaceFormRow"},r.a.createElement("label",{htmlFor:"longitude",className:"createPlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Longitude"),r.a.createElement("input",{type:"text",className:"createPlaceInput",id:"longitude",value:this.state.longitude,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("div",{className:"createPlaceFormRow"},r.a.createElement("label",{htmlFor:"openingHours",className:"createPlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Opening hours"),r.a.createElement("input",{type:"text",className:"createPlaceInput",id:"openingHours",value:this.state.openingHours,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("button",{type:"submit",className:"createPlaceSaveButton"},"Save place"))))}}]),t}(n.Component),A=Object(O.b)(null,function(e){return{createPlace:function(t){return e(P(t))}}})(U),H={getKeywords:function(){return h.a.get("/api/keywords/").then(function(e){return e.data})},getKeyword:function(e){return h.a.get("/api/keywords/"+e).then(function(e){return e.data})},createKeyword:function(e){return h.a.post("/api/keywords/",e).then(function(e){return e.data})},deleteKeyword:function(e){return h.a.delete("/api/keywords/"+e.keyword.id+"/"+e.place.id).then(function(e){return e.data})},updateKeyword:function(e){return h.a.put("/api/keywords/"+e.id,e).then(function(e){return e.data})}};function W(){return function(){var e=Object(M.a)(L.a.mark(function e(t){var a;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t(x()),e.prev=1,e.next=4,H.getKeywords();case 4:return a=e.sent,t(G(a)),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",t(q(e.t0)));case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()}var Q=function(e){var t={title:e.title,placeId:e.placeId};return function(e){H.createKeyword(t).catch(function(e){console.log(e)}).then(function(t){e(J(t)),e({type:"ADD_KEYWORD_TO_PLACE",data:{keyword:t}})})}},Y=function(e){return function(t){H.updateKeyword(e).catch(function(e){console.log(e)}).then(function(e){t(V(e)),t({type:"UPDATE_KEYWORD_FOR_PLACE",data:{keyword:e}})})}},x=function(){return{type:"FETCH_KEYWORDS_BEGIN"}},G=function(e){return{type:"FETCH_KEYWORDS_SUCCESS",data:{keywords:e}}},q=function(e){return{type:"FETCH_KEYWORDS_FAILURE",data:{error:e}}},J=function(e){return{type:"CREATE_KEYWORD",data:{title:e.title,id:e.id,place:e.place}}},z=function(e){return{type:"DELETE_KEYWORD",data:{id:e.keyword.id}}},V=function(e){return{type:"UPDATE_KEYWORD",data:{keyword:e}}};function X(e,t){for(var a=document.getElementsByTagName("LABEL"),n=0;n<a.length;n++)if(a[n].htmlFor===e){var r=document.getElementById(a[n].htmlFor);r&&(r.label=a[n]),r.label.style.color=t;break}}function Z(e,t){document.getElementById(e).style.backgroundColor=t}var $=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={updateKeywordTitle:"",id:"",placeId:""},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleUpdate=a.handleUpdate.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOverLabel=a.handleMouseOverLabel.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOutLabel=a.handleMouseOutLabel.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOverInput=a.handleMouseOverInput.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOutInput=a.handleMouseOutInput.bind(Object(m.a)(Object(m.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({updateKeywordTitle:this.props.keyword.title,id:this.props.keyword.id,placeId:this.props.place.id})}},{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.dataset.id,e.target.value))}},{key:"handleUpdate",value:function(e){e.preventDefault(),this.props.updateKeyword({title:this.state.updateKeywordTitle,id:this.state.id}),this.setState({updateKeywordTitle:""}),this.props.hideUpdateKeyword()}},{key:"handleMouseOverInput",value:function(e){e.preventDefault(),X(e.target.id,"gold"),Z(e.target.id,"gold")}},{key:"handleMouseOutInput",value:function(e){e.preventDefault(),X(e.target.id,"orange"),Z(e.target.id,"orange")}},{key:"handleMouseOverLabel",value:function(e){e.preventDefault(),X(e.target.htmlFor,"gold"),Z(e.target.htmlFor,"gold")}},{key:"handleMouseOutLabel",value:function(e){e.preventDefault(),X(e.target.htmlFor,"orange"),Z(e.target.htmlFor,"orange")}},{key:"render",value:function(){return r.a.createElement("div",{className:"updateKeywordForm",id:"updateKeywordForm"},r.a.createElement("form",{onSubmit:this.handleUpdate,autoComplete:"off"},r.a.createElement("div",{className:"updateKeywordFormRow"},r.a.createElement("label",{htmlFor:"updateKeywordTitle"+this.state.id,className:"updateKeywordLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Title"),r.a.createElement("input",{type:"text",className:"updateKeywordInput",id:"updateKeywordTitle"+this.state.id,"data-id":"updateKeywordTitle",value:this.state.updateKeywordTitle,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput,autoFocus:!0})),r.a.createElement("button",{type:"submit",className:"updateKeywordSaveButton"},"Save keyword")))}}]),t}(n.Component),ee=Object(O.b)(null,function(e){return{updateKeyword:function(t){return e(Y(t))}}})($),te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).toggleUpdateKeyword=function(e){e.preventDefault(),a.state.showKeywordForm?e.target.classList.remove("goldenButton"):e.target.classList.add("goldenButton"),a.setState({showKeywordForm:!a.state.showKeywordForm})},a.state={showKeyword:!1,showKeywordForm:!1},a.handleDeleteKeyword=a.handleDeleteKeyword.bind(Object(m.a)(Object(m.a)(a))),a.toggleShowKeyword=a.toggleShowKeyword.bind(Object(m.a)(Object(m.a)(a))),a.toggleUpdateKeyword=a.toggleUpdateKeyword.bind(Object(m.a)(Object(m.a)(a))),a.hideUpdateKeyword=a.hideUpdateKeyword.bind(Object(m.a)(Object(m.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"handleDeleteKeyword",value:function(){this.props.deleteKeyword({keyword:this.props.keyword,place:this.props.place})}},{key:"toggleShowKeyword",value:function(){var e=document.getElementById("keywordListTitle"+this.props.keyword.id),t=document.getElementById("keywordListObject"+this.props.keyword.id);this.state.showKeyword?(e.style.color="orange",t.classList.remove("linearGradient"),this.hideUpdateKeyword()):(e.style.color="gold",t.classList.add("linearGradient")),this.setState({showKeyword:!this.state.showKeyword})}},{key:"hideUpdateKeyword",value:function(){this.setState({showKeywordForm:!1}),document.getElementById("updateKeywordButton").classList.remove("goldenButton")}},{key:"render",value:function(){return r.a.createElement("div",{key:this.props.keyword.id,className:"keywordListObject",id:"keywordListObject"+this.props.keyword.id},r.a.createElement("span",{onClick:this.toggleShowKeyword,className:"keywordListTitle",id:"keywordListTitle"+this.props.keyword.id},this.props.keyword.title),this.state.showKeyword?r.a.createElement("div",{className:"keywordInfo"},r.a.createElement("div",{className:"keywordButtons"},r.a.createElement("button",{onClick:this.handleDeleteKeyword,className:"deleteKeywordButton"},"Delete keyword"),r.a.createElement("button",{onClick:this.toggleUpdateKeyword,className:"updateKeywordButton",id:"updateKeywordButton"},"Update keyword")),this.state.showKeywordForm?r.a.createElement(ee,{keyword:this.props.keyword,place:this.props.place,hideUpdateKeyword:this.hideUpdateKeyword}):null):null)}}]),t}(n.Component),ae=Object(O.b)(null,function(e){return{deleteKeyword:function(t){return e((a=t,function(e){H.deleteKeyword(a).catch(function(e){console.log(e)}).then(function(t){e(z(a)),e(function(e){return{type:"DELETE_KEYWORD_FROM_PLACE",data:{keyword:e.keyword,place:e.place}}}(a))})}));var a}}})(te),ne=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(W())}},{key:"render",value:function(){var e=this,t=this.props,a=t.error,n=t.loading,o=t.keywords;return a?r.a.createElement("div",null,"Error! ",a.message):n&&o.length>0?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"keywordsList"},r.a.createElement("p",{className:"keywordList"},"Keywords:"),o?o.map(function(t){return t.place&&t.place._id===e.props.place.id?r.a.createElement(ae,{key:t.id,keyword:t,place:e.props.place}):null}):null)}}]),t}(r.a.Component),re=Object(O.b)(function(e){return{keywords:e.keywordReducer.keywords,loading:e.keywordReducer.loading,error:e.keywordReducer.error}})(ne);function oe(e,t){for(var a=document.getElementsByTagName("LABEL"),n=0;n<a.length;n++)if(a[n].htmlFor===e){var r=document.getElementById(a[n].htmlFor);r&&(r.label=a[n]),r.label.style.color=t;break}}function le(e,t){document.getElementById(e).style.backgroundColor=t}var ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={keywordTitle:"",placeId:""},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(m.a)(Object(m.a)(a))),a.toggleFormDisplay=a.toggleFormDisplay.bind(Object(m.a)(Object(m.a)(a))),a.hideForm=a.hideForm.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOverLabel=a.handleMouseOverLabel.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOutLabel=a.handleMouseOutLabel.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOverInput=a.handleMouseOverInput.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOutInput=a.handleMouseOutInput.bind(Object(m.a)(Object(m.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({placeId:this.props.place.id})}},{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.dataset.id,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.keywordTitle;this.props.createKeyword({title:t,placeId:this.state.placeId}),this.setState({keywordTitle:""}),this.hideForm()}},{key:"toggleFormDisplay",value:function(e){e.preventDefault();var t=document.getElementById("createKeywordForm"+this.state.placeId);"none"===t.style.display?e.target.classList.add("goldenButton"):e.target.classList.remove("goldenButton"),"none"===t.style.display?t.style.display="block":t.style.display="none",document.getElementById("keywordTitle"+this.state.placeId).focus()}},{key:"hideForm",value:function(){document.getElementById("createKeywordForm"+this.state.placeId).style.display="none",document.getElementById("addKeywordButton"+this.state.placeId).classList.remove("goldenButton")}},{key:"handleMouseOverInput",value:function(e){e.preventDefault(),oe(e.target.id,"gold"),le(e.target.id,"gold")}},{key:"handleMouseOutInput",value:function(e){e.preventDefault(),oe(e.target.id,"orange"),le(e.target.id,"orange")}},{key:"handleMouseOverLabel",value:function(e){e.preventDefault(),oe(e.target.htmlFor,"gold"),le(e.target.htmlFor,"gold")}},{key:"handleMouseOutLabel",value:function(e){e.preventDefault(),oe(e.target.htmlFor,"orange"),le(e.target.htmlFor,"orange")}},{key:"render",value:function(){return r.a.createElement("div",{className:"keywordForm"},r.a.createElement("button",{onClick:this.toggleFormDisplay,className:"addKeywordButton",id:"addKeywordButton"+this.state.placeId},"Add keyword"),r.a.createElement("div",{className:"createKeywordForm",id:"createKeywordForm"+this.state.placeId,style:{display:"none"}},r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"off"},r.a.createElement("div",{className:"createKeywordFormRow"},r.a.createElement("label",{htmlFor:"keywordTitle"+this.state.placeId,className:"createKeywordLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Title"),r.a.createElement("input",{type:"text",className:"createKeywordInput",id:"keywordTitle"+this.state.placeId,value:this.state.keywordTitle,"data-id":"keywordTitle",onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("button",{type:"submit",className:"createKeywordSaveButton"},"Save keyword"))))}}]),t}(n.Component),se=Object(O.b)(null,function(e){return{createKeyword:function(t){return e(Q(t))}}})(ie);function ue(e,t){for(var a=document.getElementsByTagName("LABEL"),n=0;n<a.length;n++)if(a[n].htmlFor===e){var r=document.getElementById(a[n].htmlFor);r&&(r.label=a[n]),r.label.style.color=t;break}}function de(e,t){document.getElementById(e).style.backgroundColor=t}var ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={updateTitle:"",updateDescription:"",updateLatitude:"",updateLongitude:"",updateOpeningHours:"",id:""},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleUpdate=a.handleUpdate.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOverLabel=a.handleMouseOverLabel.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOutLabel=a.handleMouseOutLabel.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOverInput=a.handleMouseOverInput.bind(Object(m.a)(Object(m.a)(a))),a.handleMouseOutInput=a.handleMouseOutInput.bind(Object(m.a)(Object(m.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({updateTitle:this.props.place.title,updateDescription:this.props.place.description,updateLatitude:this.props.place.latitude,updateLongitude:this.props.place.longitude,updateOpeningHours:this.props.place.openingHours,id:this.props.place.id})}},{key:"handleChange",value:function(e){this.setState(Object(k.a)({},e.target.dataset.id,e.target.value))}},{key:"handleUpdate",value:function(e){e.preventDefault(),this.props.updatePlace({title:this.state.updateTitle,description:this.state.updateDescription,latitude:this.state.updateLatitude,longitude:this.state.updateLongitude,openingHours:this.state.updateOpeningHours,id:this.state.id,keywords:this.props.place.keywords}),this.setState({updateTitle:"",updateDescription:"",updateLatitude:"",updateLongitude:"",updateOpeningHours:""}),this.props.hideUpdatePlace()}},{key:"handleMouseOverInput",value:function(e){e.preventDefault(),ue(e.target.id,"gold"),de(e.target.id,"gold")}},{key:"handleMouseOutInput",value:function(e){e.preventDefault(),ue(e.target.id,"orange"),de(e.target.id,"orange")}},{key:"handleMouseOverLabel",value:function(e){e.preventDefault(),ue(e.target.htmlFor,"gold"),de(e.target.htmlFor,"gold")}},{key:"handleMouseOutLabel",value:function(e){e.preventDefault(),ue(e.target.htmlFor,"orange"),de(e.target.htmlFor,"orange")}},{key:"render",value:function(){return r.a.createElement("div",{className:"updatePlaceForm",id:"updatePlaceForm"},r.a.createElement("form",{onSubmit:this.handleUpdate,autoComplete:"off"},r.a.createElement("div",{className:"updatePlaceFormRow"},r.a.createElement("label",{htmlFor:"updateTitle"+this.state.id,className:"updatePlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Title"),r.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateTitle"+this.state.id,"data-id":"updateTitle",value:this.state.updateTitle,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput,autoFocus:!0})),r.a.createElement("div",{className:"updatePlaceFormRow"},r.a.createElement("label",{htmlFor:"updateDescription"+this.state.id,className:"updatePlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Description"),r.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateDescription"+this.state.id,"data-id":"updateDescription",value:this.state.updateDescription,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("div",{className:"updatePlaceFormRow"},r.a.createElement("label",{htmlFor:"updateLatitude"+this.state.id,className:"updatePlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Latitude"),r.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateLatitude"+this.state.id,"data-id":"updateLatitude",value:this.state.updateLatitude,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("div",{className:"updatePlaceFormRow"},r.a.createElement("label",{htmlFor:"updateLongitude"+this.state.id,className:"updatePlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Longitude"),r.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateLongitude"+this.state.id,"data-id":"updateLongitude",value:this.state.updateLongitude,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("div",{className:"updatePlaceFormRow"},r.a.createElement("label",{htmlFor:"updateOpeningHours"+this.state.id,className:"updatePlaceLabel",onMouseOver:this.handleMouseOverLabel,onMouseOut:this.handleMouseOutLabel},"Opening hours"),r.a.createElement("input",{type:"text",className:"updatePlaceInput",id:"updateOpeningHours"+this.state.id,"data-id":"updateOpeningHours",value:this.state.updateOpeningHours,onChange:this.handleChange,onMouseOver:this.handleMouseOverInput,onMouseOut:this.handleMouseOutInput})),r.a.createElement("button",{type:"submit",className:"updatePlaceSaveButton"},"Save place")))}}]),t}(n.Component),pe=Object(O.b)(null,function(e){return{updatePlace:function(t){return e(K(t))}}})(ce),he=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).toggleUpdatePlace=function(e){e.preventDefault(),a.state.showUpdateForm?e.target.classList.remove("goldenButton"):e.target.classList.add("goldenButton"),a.setState({showUpdateForm:!a.state.showUpdateForm})},a.state={showPlace:!1,showUpdateForm:!1},a.handleDeletePlace=a.handleDeletePlace.bind(Object(m.a)(Object(m.a)(a))),a.toggleShowPlace=a.toggleShowPlace.bind(Object(m.a)(Object(m.a)(a))),a.toggleUpdatePlace=a.toggleUpdatePlace.bind(Object(m.a)(Object(m.a)(a))),a.hideUpdatePlace=a.hideUpdatePlace.bind(Object(m.a)(Object(m.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"handleDeletePlace",value:function(){this.props.deletePlace(this.props.place.id)}},{key:"toggleShowPlace",value:function(){var e=document.getElementById("placeListTitle"+this.props.place.id),t=document.getElementById("placeListObject"+this.props.place.id);this.state.showPlace?(e.style.color="orange",t.classList.remove("linearGradient"),this.hideUpdatePlace()):(e.style.color="gold",t.classList.add("linearGradient")),this.setState({showPlace:!this.state.showPlace})}},{key:"hideUpdatePlace",value:function(){this.setState({showUpdateForm:!1}),document.getElementById("updatePlaceButton").classList.remove("goldenButton")}},{key:"render",value:function(){return r.a.createElement("div",{key:this.props.place.id,className:"placeListObject",id:"placeListObject"+this.props.place.id},r.a.createElement("span",{onClick:this.toggleShowPlace,className:"placeListTitle",id:"placeListTitle"+this.props.place.id},this.props.place.title),this.state.showPlace?r.a.createElement("div",{className:"placeInfo"},r.a.createElement("span",null,this.props.place.description),r.a.createElement("br",null),r.a.createElement("span",null,"Open: ",this.props.place.openingHours),r.a.createElement("br",null),r.a.createElement(re,{place:this.props.place}),r.a.createElement(se,{place:this.props.place}),r.a.createElement("div",{className:"placeButtons"},r.a.createElement("button",{onClick:this.handleDeletePlace,className:"deletePlaceButton"},"Delete place"),r.a.createElement("button",{onClick:this.toggleUpdatePlace,className:"updatePlaceButton",id:"updatePlaceButton"},"Update place")),this.state.showUpdateForm?r.a.createElement(pe,{place:this.props.place,hideUpdatePlace:this.hideUpdatePlace}):null):null)}}]),t}(n.Component),ye=Object(O.b)(null,function(e){return{deletePlace:function(t){return e(function(e){return function(t){I.deletePlace(e).catch(function(e){console.log(e)}).then(function(a){t(N(e))})}}(t))}}})(he),me=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(C())}},{key:"render",value:function(){var e=this.props,t=e.error,a=e.loading,n=e.places;return t?r.a.createElement("div",null,"Error! ",t.message):a&&n.length>0?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",{className:"placesList"},this.props.placesByQuery.length>0||this.props.keywordSearchQuery.length>0?this.props.placesByQuery.map(function(e){return r.a.createElement(ye,{key:e.id,place:e})}):this.props.places.map(function(e){return r.a.createElement(ye,{key:e.id,place:e})}))}}]),t}(r.a.Component),ge=Object(O.b)(function(e){return{places:e.placeReducer.places,placesByQuery:e.placeReducer.placesByQuery,keywordSearchQuery:e.placeReducer.keywordSearchQuery,loading:e.placeReducer.loading,error:e.placeReducer.error}})(me),Oe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).searchByKeyword=function(e){return function(t){t.preventDefault(),a.setState({keywordSearchQuery:e}),a.dispatchPlacesByQuery(e)}},a.state={keywordSearchQuery:"",keywords:[],uniqueKeywords:[]},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.toggleKeywordListDisplay=a.toggleKeywordListDisplay.bind(Object(m.a)(Object(m.a)(a))),a.getUniqueKeywordsByTitle=a.getUniqueKeywordsByTitle.bind(Object(m.a)(Object(m.a)(a))),a.searchByKeyword=a.searchByKeyword.bind(Object(m.a)(Object(m.a)(a))),a.dispatchPlacesByQuery=a.dispatchPlacesByQuery.bind(Object(m.a)(Object(m.a)(a))),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(C()),this.props.dispatch(W()),this.setState({keywords:this.props.keywords})}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({keywordSearchQuery:t}),this.dispatchPlacesByQuery(t)}},{key:"toggleKeywordListDisplay",value:function(){var e=document.getElementById("toggleKeywordListButton"),t=document.getElementById("keywordList");"none"===t.style.display?(t.style.display="block",e.innerHTML="Hide keywords"):(t.style.display="none",e.innerHTML="Show keywords"),e.classList.contains("goldenButton")?e.classList.remove("goldenButton"):e.classList.add("goldenButton")}},{key:"getUniqueKeywordsByTitle",value:function(e){for(var t=[],a=0;a<e.length;a++){for(var n=!1,r=0;r<t.length;r++)t[r].title===e[a].title&&(n=!0);n||t.push(e[a])}return t.sort(function(e,t){return e.title.localeCompare(t.title)})}},{key:"dispatchPlacesByQuery",value:function(e){var t=this,a=[];this.props.places.map(function(n,r){return n.keywords&&n.keywords.map(function(t){return e.length>0&&t.title.toLowerCase().startsWith(e.toLowerCase())?a.includes(n)?null:a=a.concat(n):null}),r===t.props.places.length-1&&t.props.dispatch(function(e,t){return{type:"PLACES_BY_QUERY",data:{placesByQuery:e,keywordSearchQuery:t}}}(a,e)),null})}},{key:"render",value:function(){var e=this,t=this.props,a=t.error,n=t.loading,o=t.keywords;return a?r.a.createElement("div",null,"Error! ",a.message):n&&o.length>0?r.a.createElement("div",null,"Loading..."):r.a.createElement("div",null,r.a.createElement("div",{className:"keywordSearch"},r.a.createElement("p",null,"Search places with keywords"),r.a.createElement("input",{className:"keywordSearchInput",id:"keywordSearchQuery",onChange:this.handleChange,value:this.state.keywordSearchQuery})),r.a.createElement("div",{className:"keywordList"},r.a.createElement("button",{onClick:this.toggleKeywordListDisplay,className:"toggleKeywordListButton",id:"toggleKeywordListButton"},"Show keywords"),r.a.createElement("ul",{style:{display:"none"},id:"keywordList"},this.getUniqueKeywordsByTitle(o).map(function(t){return r.a.createElement("li",{key:t.id,className:"keywordListItem",onClick:e.searchByKeyword(t.title)},t.title)}))))}}]),t}(n.Component),be=Object(O.b)(function(e){return{places:e.placeReducer.places,placesByQuery:e.placeReducer.placesByQuery,keywords:e.keywordReducer.keywords,loading:e.placeReducer.loading,error:e.placeReducer.error}})(Oe),ve=function(){return r.a.createElement("div",{className:"content"},r.a.createElement(E,null),r.a.createElement("div",{id:"alignedDivs"},r.a.createElement("div",{id:"leftDiv"},r.a.createElement(A,null),r.a.createElement(be,null)),r.a.createElement("div",{id:"rightDiv"},r.a.createElement(ge,null))))},fe=a(16),we=a(33),Ee=a(14),ke={places:[],placesByQuery:[],keywordSearchQuery:"",loading:!1,error:null},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0,a=e.places;switch(t.type){case"FETCH_PLACES_BEGIN":return Object(Ee.a)({},e,{loading:!0,error:null});case"FETCH_PLACES_SUCCESS":return Object(Ee.a)({},e,{loading:!1,places:t.data.places});case"FETCH_PLACES_FAILURE":return Object(Ee.a)({},e,{loading:!1,error:t.data.error,places:[]});case"CREATE_PLACE":var n=t.data;return n.keywords=[],Object.assign({},e,{places:e.places.concat(n)});case"DELETE_PLACE":return Object.assign({},e,{places:e.places.filter(function(e){return e.id!==t.data.id})});case"UPDATE_PLACE":return Object.assign({},e,{places:e.places.map(function(e){return e.id!==t.data.place.id?e:t.data.place})});case"PLACES_BY_QUERY":return Object.assign({},e,{placesByQuery:t.data.placesByQuery,keywordSearchQuery:t.data.keywordSearchQuery});case"ADD_KEYWORD_TO_PLACE":a=e.places;var r={_id:t.data.keyword.id,title:t.data.keyword.title};return a.map(function(e){return e.id===t.data.keyword.place._id?e.keywords=e.keywords.concat(r):null}),Object.assign({},e,{places:a});case"DELETE_KEYWORD_FROM_PLACE":var o=t.data.place;return o.keywords=o.keywords.filter(function(e){return e._id!==t.data.keyword.id}),Object.assign({},e,{places:e.places.map(function(e){return e.id===o.id?o:e})});case"UPDATE_KEYWORD_FOR_PLACE":a=e.places;for(var l=0;l<a.length;l++)a[l].id===t.data.keyword.place._id&&a[l].keywords.map(function(e){return e._id===t.data.keyword.id?e.title=t.data.keyword.title:null});return Object.assign({},e,{places:a});default:return e}},Le={markers:[{title:"testiMarker"}]},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le;return(arguments.length>1?arguments[1]:void 0).type,e},Ie={keywords:[],loading:!1,error:null},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_KEYWORDS_BEGIN":return Object(Ee.a)({},e,{loading:!0,error:null});case"FETCH_KEYWORDS_SUCCESS":var a=t.data.keywords.sort();return Object(Ee.a)({},e,{loading:!1,keywords:a});case"FETCH_KEYWORDS_FAILURE":return Object(Ee.a)({},e,{loading:!1,error:t.data.error,keywords:[]});case"CREATE_KEYWORD":return Object.assign({},e,{keywords:e.keywords.concat(t.data)});case"DELETE_KEYWORD":return Object.assign({},e,{keywords:e.keywords.filter(function(e){return e.id!==t.data.id})});case"UPDATE_KEYWORD":return Object.assign({},e,{keywords:e.keywords.map(function(e){return e.id!==t.data.keyword.id?e:t.data.keyword})});default:return e}},Pe=Object(fe.c)({placeReducer:je,markerReducer:Me,keywordReducer:Ce}),Ke=Object(fe.d)(Pe,Object(fe.a)(we.a));a(75),a(76),a(77),a(78);Object(o.render)(r.a.createElement(O.a,{store:Ke},r.a.createElement(ve,null)),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.abbaf56b.chunk.js.map